(function(e){function t(t){for(var r,o,i=t[0],u=t[1],s=t[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={app:0},a={app:0},c=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-05cb4c06":"d6f635b5","chunk-2d0cc266":"e3c59b55","chunk-4c01e2f6":"c39651a0","chunk-26c095c0":"84d279fe","chunk-3a329600":"ddc5b3a5"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-26c095c0":1,"chunk-3a329600":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-05cb4c06":"31d6cfe0","chunk-2d0cc266":"31d6cfe0","chunk-4c01e2f6":"31d6cfe0","chunk-26c095c0":"976f81d9","chunk-3a329600":"0208f8d1"}[e]+".css",a=u.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){s=d[i],l=s.getAttribute("data-href");if(l===r||l===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete o[e],p.parentNode.removeChild(p),n(c)},p.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var p=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"33bb":function(e,t,n){"use strict";n("7dbf")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o={id:"navigation_bar"},a={id:"route_viewer"};function c(e,t,n,c,i,u){var s=Object(r["M"])("the-navigation"),l=Object(r["M"])("the-header"),d=Object(r["M"])("n-layout-header"),p=Object(r["M"])("router-view"),h=Object(r["M"])("n-layout-footer"),b=Object(r["M"])("n-space"),f=Object(r["M"])("n-message-provider"),j=Object(r["M"])("n-loading-bar-provider");return Object(r["F"])(),Object(r["i"])(j,null,{default:Object(r["V"])((function(){return[Object(r["n"])(f,null,{default:Object(r["V"])((function(){return[Object(r["n"])(b,{vertical:"",size:"large",style:{width:"100%"}},{default:Object(r["V"])((function(){return[Object(r["l"])("div",null,[Object(r["l"])("div",o,[Object(r["n"])(s)]),Object(r["l"])("div",a,[Object(r["n"])(d,null,{default:Object(r["V"])((function(){return[Object(r["n"])(l)]})),_:1}),Object(r["n"])(p,{id:"route_viewer"})])]),Object(r["n"])(h)]})),_:1})]})),_:1})]})),_:1})}var i=n("c872"),u=n("48da"),s=n("0bcf"),l=n("ced7"),d=n("8c9c"),p={vertical:""};function h(e,t,n,o,a,c){var i=Object(r["M"])("n-menu"),u=Object(r["M"])("n-layout-sider"),s=Object(r["M"])("n-layout");return Object(r["F"])(),Object(r["k"])("div",p,[Object(r["n"])(s,{id:"nav"},{default:Object(r["V"])((function(){return[Object(r["n"])(s,{"has-sider":"",style:{height:"90vh"}},{default:Object(r["V"])((function(){return[Object(r["n"])(u,{bordered:"","collapse-mode":"width","collapsed-width":64,collapsed:e.collapsed,width:240,"native-scrollbar":!1,style:{"max-height":"100%"}},{default:Object(r["V"])((function(){return[Object(r["n"])(i,{"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,collapsed:e.collapsed,"onUpdate:value":e.handleUpdateValue},null,8,["options","collapsed","onUpdate:value"])]})),_:1},8,["collapsed"]),Object(r["n"])(s)]})),_:1})]})),_:1})])}var b=n("c678"),f=n("6c4e"),j=n("6ca9"),O=n("ec84"),m=n("ee5e"),g=n("e9ce"),y=n("c606");function v(e){return function(){return Object(r["q"])(b["a"],null,{default:function(){return Object(r["q"])(e)}})}}var k=[{label:"我的",key:"hear-the-wind-sing",icon:v(j["a"])},{label:"列表",key:"pinball-1973",icon:v(O["a"]),disabled:!1,children:[{label:"最近添加",key:"latest"},{label:"猜你喜欢",key:"rat"}]},{label:"书架",key:"a-wild-sheep-chase",disabled:!1,icon:v(m["a"])},{label:"设置",key:"settings",disabled:!1,icon:v(g["a"])},{label:"收起",key:"collapsed",disabled:!1,icon:v(y["a"])}],w=Object(r["o"])({setup:function(){return{inverted:Object(r["J"])(!1),menuOptions:k,newValue:window.clientHeight}},components:{NLayout:u["b"],NLayoutHeader:s["a"],NLayoutFooter:l["a"],NLayoutSider:d["a"],NMenu:f["a"],NSpace:i["a"]},methods:{handleUpdateValue:function(e,t){"collapsed"===e&&(this.collapsed=!this.collapsed,this.emitter.emit("menu_collapsed",{status:this.collapsed}))}},data:function(){return{collapsed:!1}},watch:{}}),_=(n("b1e1"),n("6b0d")),V=n.n(_);const M=V()(w,[["render",h]]);var x=M;function S(e,t,n,o,a,c){var i=Object(r["M"])("arrow-back"),u=Object(r["M"])("n-icon"),s=Object(r["M"])("n-button"),l=Object(r["M"])("n-space"),d=Object(r["M"])("n-gi"),p=Object(r["M"])("add"),h=Object(r["M"])("n-auto-complete"),b=Object(r["M"])("add-book"),f=Object(r["M"])("n-modal"),j=Object(r["M"])("n-grid");return Object(r["F"])(),Object(r["i"])(j,{"x-gap":"12",cols:2,style:{height:"60px"}},{default:Object(r["V"])((function(){return[Object(r["n"])(d,null,{default:Object(r["V"])((function(){return[Object(r["n"])(l,{justify:"start",align:"center",style:{height:"40px"}},{default:Object(r["V"])((function(){return[Object(r["n"])(s,{circle:"",style:{"margin-left":"10px"},size:"medium",onClick:c.goBack},{icon:Object(r["V"])((function(){return[Object(r["n"])(u,null,{default:Object(r["V"])((function(){return[Object(r["n"])(i)]})),_:1})]})),_:1},8,["onClick"]),Object(r["l"])("h2",{onClick:t[0]||(t[0]=function(){return c.goIndex&&c.goIndex.apply(c,arguments)}),id:"logo"},"Comic DB")]})),_:1})]})),_:1}),Object(r["n"])(d,null,{default:Object(r["V"])((function(){return[Object(r["n"])(l,{id:"toolbar",justify:"end",align:"center"},{default:Object(r["V"])((function(){return[Object(r["n"])(s,{text:"",style:{"font-size":"36px","margin-top":"8px"},onClick:t[1]||(t[1]=function(e){return a.showAdd=!0})},{default:Object(r["V"])((function(){return[Object(r["n"])(u,null,{default:Object(r["V"])((function(){return[Object(r["n"])(p)]})),_:1})]})),_:1}),Object(r["n"])(h,{options:c.searchOption,value:a.searchValue,"onUpdate:value":t[2]||(t[2]=function(e){return a.searchValue=e}),onKeyup:Object(r["X"])(c.jumpToBook,["enter"]),placeholder:"搜索图书"},null,8,["options","value","onKeyup"]),Object(r["n"])(f,{show:a.showAdd,"onUpdate:show":t[3]||(t[3]=function(e){return a.showAdd=e}),id:"add_box"},{default:Object(r["V"])((function(){return[Object(r["n"])(b)]})),_:1},8,["show"])]})),_:1})]})),_:1})]})),_:1})}n("d3b7"),n("e9c4"),n("caad"),n("2532");var A=n("8e13"),C=n("b4a7"),N=Object(r["l"])("text",null,"E-hentai爬虫",-1),z=Object(r["m"])("添加");function I(e,t,n,o,a,c){var i=Object(r["M"])("n-progress"),u=Object(r["M"])("n-input"),s=Object(r["M"])("n-button"),l=Object(r["M"])("space"),d=Object(r["M"])("n-card");return Object(r["F"])(),Object(r["i"])(d,{style:{width:"700px"},title:"添加书籍",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:Object(r["V"])((function(){return[N,a.downloading?(Object(r["F"])(),Object(r["i"])(i,{key:0,type:"line",status:a.downloadStatus,percentage:a.downloadRate,"indicator-placement":e.inside,processing:a.is_processing,style:{"margin-bottom":"10px"}},null,8,["status","percentage","indicator-placement","processing"])):Object(r["j"])("",!0),Object(r["n"])(l,null,{default:Object(r["V"])((function(){return[Object(r["n"])(u,{style:{width:"480px","margin-right":"50px"},value:a.ehentaiURL,"onUpdate:value":t[0]||(t[0]=function(e){return a.ehentaiURL=e}),size:"small",round:"",placeholder:"https://e-hentai.org"},null,8,["value"]),Object(r["n"])(s,{secondary:"",onClick:c.addEhentaiBook,type:"success",disabled:a.notAdd},{default:Object(r["V"])((function(){return[z]})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1})}var L=n("1da1"),R=(n("96cf"),n("fb6a"),n("ac1f"),n("841c"),{setup:function(){},data:function(){return{downloading:!0,downloadRate:0,is_processing:!1,downloadStatus:"default",ehentaiURL:"",notAdd:!1,ehentaiCrawlerId:""}},created:function(){},methods:{addEhentaiBook:function(){this.ehentaiURL&&this.sendEhentaiRequest()},sendEhentaiRequest:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:fetch("/api/add",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({crawler_name:"ehentai_crawler",token:"123456",url:e.ehentaiURL})}).then((function(e){return e.json()})).then((function(t){"ok"===t.msg&&(e.ehentaiCrawlerId=t.uuid,e.crawlingStatusRequest())}));case 1:case"end":return t.stop()}}),t)})))()},crawlingStatusRequest:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.ehentaiCrawlerId&&fetch("/api/get_crawler_progress",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({crawler_id:e.ehentaiCrawlerId,token:"123456"})}).then((function(e){return e.json()})).then((function(t){"ok"==t.msg?(e.is_processing=!0,e.notAdd=!0,parseInt(t.progress.slice(t.progress.search(/([0-9]*?%)/),-2))&&(e.downloadRate=parseInt(t.progress.slice(t.progress.search(/([0-9]*?%)/),-2))),setTimeout(e.crawlingStatusRequest,500)):(e.ehentaiCrawlerId="",e.is_processing=!1,e.notAdd=!1)}));case 1:case"end":return t.stop()}}),t)})))()}}});const T=V()(R,[["render",I]]);var q=T,E={created:function(){this.excuteFuzzySearch()},data:function(){return{searchValue:"",options:[],saveValue:"",showAdd:!1,bookIdArray:[]}},components:{ArrowBack:A["a"],NIcon:b["a"],Add:C["a"],AddBook:q},methods:{goBack:function(){this.$router.back()},goIndex:function(){this.$router.push({name:"book.list",params:{query:"time",fuzzy:0}})},updateOptions:function(){var e=this;fetch("/api/list",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"title",token:"123456",matcher:this.searchValue,fuzzy:1,page:0})}).then((function(e){return e.json()})).then((function(t){e.bookIdArray=[],e.options=[],console.log(t);for(var n=0;n<t.length;n++)e.options.push(t[n].title),e.bookIdArray.push(t[n].book_id)}))},excuteFuzzySearch:function(){""!==this.searchValue&&this.searchValue!==this.saveValue&&(this.updateOptions(),this.saveValue=this.searchValue),setTimeout(this.excuteFuzzySearch,500)},jumpToBook:function(){this.options.includes(this.searchValue)?this.$router.push({name:"book.info",params:{id:this.bookIdArray[this.options.indexOf(this.searchValue)]}}):this.$router.push({name:"book.list",params:{query:"title",matcher:this.searchValue}}),this.searchValue=""}},computed:{searchOption:function(){return this.options}}};n("33bb");const P=V()(E,[["render",S]]);var U=P,B={created:function(){document.querySelector("body").setAttribute("style","overflow:hidden;")},data:function(){return{}},components:{NSpace:i["a"],NLayout:u["b"],NLayoutHeader:s["a"],NLayoutFooter:l["a"],TheNavigation:x,NLayoutSider:d["a"],TheHeader:U}};n("f085");const F=V()(B,[["render",c]]);var H=F,J=(n("3ca3"),n("ddb0"),n("6c02")),$=[{path:"/",name:"Home",redirect:"/list"},{path:"/book/:id",name:"book.info",component:function(){return Promise.all([n.e("chunk-05cb4c06"),n.e("chunk-4c01e2f6"),n.e("chunk-26c095c0")]).then(n.bind(null,"68a6"))},props:function(e){return{book_id:parseInt(e.params.id)}}},{path:"/list",name:"book.list",component:function(){return Promise.all([n.e("chunk-4c01e2f6"),n.e("chunk-3a329600")]).then(n.bind(null,"0e6d"))},props:function(e){return{query:e.params.query,fuzzy:parseInt(e.params.fuzzy),matcher:e.params.matcher}}},{path:"/read/comic",name:"book.read",component:function(){return Promise.all([n.e("chunk-05cb4c06"),n.e("chunk-2d0cc266")]).then(n.bind(null,"4d66"))},props:function(e){return{slected_page:e.params.slected_page,book_id:parseInt(e.params.book_id)}}}],D=Object(J["a"])({history:Object(J["b"])("/"),routes:$}),K=D,X=n("5333"),G=n("1344"),Q=Object(G["a"])(),W=Object(r["h"])(H);W.use(K).use(X["a"]).mount("#app"),W.config.globalProperties.emitter=Q},"67ac":function(e,t,n){},"7dbf":function(e,t,n){},b1e1:function(e,t,n){"use strict";n("67ac")},e14c:function(e,t,n){},f085:function(e,t,n){"use strict";n("e14c")}});
//# sourceMappingURL=app.514b37a4.js.map