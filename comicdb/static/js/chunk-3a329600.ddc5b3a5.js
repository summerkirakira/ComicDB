(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a329600"],{"0b42":function(e,t,n){var r=n("da84"),o=n("e8b5"),a=n("68ee"),i=n("861d"),c=n("b622"),u=c("species"),s=r.Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,a(t)&&(t===s||o(t.prototype))?t=void 0:i(t)&&(t=t[u],null===t&&(t=void 0))),void 0===t?s:t}},"0e6d":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=["src"];function a(e,t,n,a,i,c){var u=Object(r["M"])("n-ellipsis"),s=Object(r["M"])("n-space"),l=Object(r["M"])("n-card"),d=Object(r["M"])("model-progress"),f=Object(r["M"])("n-layout-content"),p=Object(r["M"])("n-layout");return Object(r["F"])(),Object(r["i"])(s,{vertical:"",size:"large",style:{height:"87vh",width:"100%"}},{default:Object(r["V"])((function(){return[Object(r["n"])(p,{position:"absolute",style:{"margin-top":"20px",width:"100%"}},{default:Object(r["V"])((function(){return[Object(r["n"])(f,{style:{"padding-right":"23px",height:"auto"},id:"bookLayout"},{default:Object(r["V"])((function(){return[0!=e.bookList.length?(Object(r["F"])(),Object(r["i"])(s,{key:0,size:"large",justify:"center",style:{"margin-bottom":"1px","overflow-y":"auto"},id:"bookListViewer"},{default:Object(r["V"])((function(){return[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["K"])(e.bookList,(function(t){return Object(r["F"])(),Object(r["i"])(l,{hoverable:"","content-style":"padding: 5px",style:{width:"200px",height:"347px"},key:t.book_id,onClick:function(n){return e.jumpToInfo(t.book_id)}},{cover:Object(r["V"])((function(){return[Object(r["l"])("img",{src:"/api/cover/".concat(t.cover),style:{height:"280px"}},null,8,o)]})),default:Object(r["V"])((function(){return[Object(r["l"])("div",null,[Object(r["n"])(u,{class:"title","line-clamp":1},{default:Object(r["V"])((function(){return[Object(r["m"])(Object(r["O"])(t.title),1)]})),_:2},1024),Object(r["n"])(s,null,{default:Object(r["V"])((function(){return[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["K"])(t.authors,(function(e){return Object(r["F"])(),Object(r["k"])("text",{class:"author",key:e},Object(r["O"])(e),1)})),128))]})),_:2},1024)])]})),_:2},1032,["onClick"])})),128))]})),_:1})):Object(r["j"])("",!0),Object(r["n"])(d,{percentage:e.uploadPercentage,isUploading:e.isUploading},null,8,["percentage","isUploading"])]})),_:1})]})),_:1})]})),_:1})}var i=n("1da1"),c=(n("a9e3"),n("ac1f"),n("1276"),n("b0c0"),n("d3b7"),n("e9c4"),n("99af"),n("96cf"),n("9ec0")),u=n("7317"),s=n("bd3a"),l=n("bc3a"),d=n.n(l),f=Object(r["o"])({mounted:function(){document.addEventListener("dragenter",this.onDrag,!1),document.addEventListener("dragover",this.onDrag,!1),document.addEventListener("drop",this.onDrop,!1)},setup:function(){var e=Object(c["a"])(),t=Object(u["a"])();return{createNoMoreMessage:function(){t.info("没有更多了的说～",{duration:1e4})},handleStart:function(){e.start()},handleFinish:function(){e.finish()},handleError:function(){e.error()}}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getBookList(0);case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{showCrawlCard:!1,bookList:[],currentPage:0,scrollViewer:void 0,is_loading:!0,uploadPercentage:0,isUploading:!1}},components:{ModelProgress:s["a"]},props:{query:{type:String,required:!0},fuzzy:{type:Number,required:!0},matcher:{type:String,required:!1}},methods:{uploadFile:function(e){var t=this;if(this.isUploading=!0,this.uploadPercentage=0,"epub"==e.name.split(".").pop().toLowerCase()){var n=new FormData;n.append("file",e),n.append("token","12321d"),n.append("file_type","epub");var r={onUploadProgress:function(e){var n=e.loaded/e.total*100|0;t.uploadPercentage=n}};d.a.post("/api/add",n,r).then((function(e){"ok"===e.data.msg&&(t.isUploading=!1,t.uploadPercentage=0,t.$router.go())}))}else if("zip"==e.name.split(".").pop().toLowerCase()){var o=new FormData;o.append("file",e),o.append("token","12321d"),o.append("file_type","ehentai_zip");var a={onUploadProgress:function(e){var n=e.loaded/e.total*100|0;t.uploadPercentage=n}};d.a.post("/api/add",o,a).then((function(e){"ok"===e.data.msg&&(t.isUploading=!1,t.uploadPercentage=0,t.$router.go())}))}},onDrag:function(e){e.stopPropagation(),e.preventDefault()},onDrop:function(e){e.stopPropagation(),e.preventDefault();for(var t=e.dataTransfer,n=0;n!==t.files.length;n++)this.uploadFile(t.files[n])},getBookList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:fetch("/api/list",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t.query?t.query:"time",matcher:t.matcher,token:"123456",fuzzy:t.fuzzy?t.fuzzy:0,page:parseInt(e)})}).then((function(e){return e.json()})).then((function(e){if(t.bookList=t.bookList.concat(e),t.currentPage++,0==e.length)return t.createNoMoreMessage(),t.handleError(),void(t.is_loading=!0);1!=t.currentPage&&t.handleFinish(),setTimeout((function(){return t.is_loading=!1}),1e3)}));case 1:case"end":return n.stop()}}),n)})))()},jumpToInfo:function(e){this.$router.push({name:"book.info",params:{id:parseInt(e)}})}},computed:{scrollTop:function(){return void 0===this.scrollViewer?0:this.scrollViewer.scrollTop}},watch:{bookList:function(){var e=this;this.$nextTick((function(){e.scrollViewer=document.getElementById("bookLayout").parentElement,e.scrollViewer.onscroll=function(t){e.currentPage;var n=e.scrollViewer.scrollHeight,r=e.scrollViewer.scrollTop;n<100||e.is_loading||n-r<1e3&&(e.is_loading=!0,e.handleStart(),e.getBookList(e.currentPage))}}))}}}),p=(n("e0ed"),n("6b0d")),b=n.n(p);const g=b()(f,[["render",a]]);t["default"]=g},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"4dae":function(e,t,n){var r=n("da84"),o=n("23cb"),a=n("07fa"),i=n("8418"),c=r.Array,u=Math.max;e.exports=function(e,t,n){for(var r=a(e),s=o(t,r),l=o(void 0===n?r:n,r),d=c(u(l-s,0)),f=0;s<l;s++,f++)i(d,f,e[s]);return d.length=f,d}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),o=n("1d80"),a=n("577e"),i=n("5899"),c=r("".replace),u="["+i+"]",s=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),d=function(e){return function(t){var n=a(o(t));return 1&e&&(n=c(n,s,"")),2&e&&(n=c(n,l,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},7156:function(e,t,n){var r=n("1626"),o=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,c;return a&&r(i=t.constructor)&&i!==n&&o(c=i.prototype)&&c!==n.prototype&&a(e,c),e}},7908:function(e,t,n){},"99af":function(e,t,n){"use strict";var r=n("23e7"),o=n("da84"),a=n("d039"),i=n("e8b5"),c=n("861d"),u=n("7b0b"),s=n("07fa"),l=n("8418"),d=n("65f0"),f=n("1dde"),p=n("b622"),b=n("2d00"),g=p("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",j=o.TypeError,m=b>=51||!a((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),O=f("concat"),y=function(e){if(!c(e))return!1;var t=e[g];return void 0!==t?!!t:i(e)},w=!m||!O;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,r,o,a,i=u(this),c=d(i,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?i:arguments[t],y(a)){if(o=s(a),f+o>h)throw j(v);for(n=0;n<o;n++,f++)n in a&&l(c,f,a[n])}else{if(f>=h)throw j(v);l(c,f++,a)}return c.length=f,c}})},a9e3:function(e,t,n){"use strict";var r=n("83ab"),o=n("da84"),a=n("e330"),i=n("94ca"),c=n("6eeb"),u=n("1a2d"),s=n("7156"),l=n("3a9b"),d=n("d9b5"),f=n("c04e"),p=n("d039"),b=n("241c").f,g=n("06cf").f,h=n("9bf2").f,v=n("408a"),j=n("58a8").trim,m="Number",O=o[m],y=O.prototype,w=o.TypeError,k=a("".slice),x=a("".charCodeAt),_=function(e){var t=f(e,"number");return"bigint"==typeof t?t:E(t)},E=function(e){var t,n,r,o,a,i,c,u,s=f(e,"number");if(d(s))throw w("Cannot convert a Symbol value to a number");if("string"==typeof s&&s.length>2)if(s=j(s),t=x(s,0),43===t||45===t){if(n=x(s,2),88===n||120===n)return NaN}else if(48===t){switch(x(s,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+s}for(a=k(s,2),i=a.length,c=0;c<i;c++)if(u=x(a,c),u<48||u>o)return NaN;return parseInt(a,r)}return+s};if(i(m,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var I,N=function(e){var t=arguments.length<1?0:O(_(e)),n=this;return l(y,n)&&p((function(){v(n)}))?s(Object(t),n,N):t},L=r?b(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),V=0;L.length>V;V++)u(O,I=L[V])&&!u(N,I)&&h(N,I,g(O,I));N.prototype=y,y.constructor=N,c(o,m,N)}},e0ed:function(e,t,n){"use strict";n("7908")}}]);
//# sourceMappingURL=chunk-3a329600.ddc5b3a5.js.map