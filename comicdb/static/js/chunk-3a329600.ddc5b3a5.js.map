{"version":3,"sources":["webpack:///./node_modules/core-js/internals/array-species-constructor.js","webpack:///./src/views/BookList.vue","webpack:///./src/views/BookList.vue?e571","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/core-js/internals/array-slice-simple.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./src/views/BookList.vue?9d7e"],"names":["global","isArray","isConstructor","isObject","wellKnownSymbol","SPECIES","Array","module","exports","originalArray","C","constructor","prototype","undefined","vertical","size","style","position","id","bookList","length","justify","book","hoverable","content-style","key","book_id","jumpToInfo","cover","src","class","line-clamp","title","authors","author","percentage","uploadPercentage","isUploading","mounted","document","addEventListener","this","onDrag","onDrop","setup","loadingBar","message","createNoMoreMessage","info","duration","handleStart","start","handleFinish","finish","handleError","error","created","getBookList","data","showCrawlCard","currentPage","scrollViewer","is_loading","components","ModelProgress","props","query","type","String","required","fuzzy","Number","matcher","methods","uploadFile","file","name","split","pop","toLowerCase","form","FormData","append","config","onUploadProgress","progressEvent","complete","loaded","total","a","post","then","res","msg","$router","go","e","stopPropagation","preventDefault","dt","dataTransfer","i","files","page","fetch","method","headers","body","JSON","stringify","token","parseInt","response","json","concat","setTimeout","push","params","computed","scrollTop","watch","$nextTick","getElementById","parentElement","onscroll","event","scrollHeight","__exports__","render","uncurryThis","valueOf","toAbsoluteIndex","lengthOfArrayLike","createProperty","max","Math","O","end","k","fin","result","n","requireObjectCoercible","toString","whitespaces","replace","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","trim","arraySpeciesConstructor","isCallable","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","$","fails","toObject","arraySpeciesCreate","arrayMethodHasSpeciesSupport","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","TypeError","IS_CONCAT_SPREADABLE_SUPPORT","array","SPECIES_SUPPORT","isConcatSpreadable","spreadable","FORCED","target","proto","forced","arg","len","E","A","arguments","DESCRIPTORS","isForced","redefine","hasOwn","inheritIfRequired","isPrototypeOf","isSymbol","toPrimitive","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","thisNumberValue","NUMBER","NativeNumber","NumberPrototype","arraySlice","slice","charCodeAt","toNumeric","value","primValue","toNumber","argument","first","third","radix","maxCode","digits","index","code","it","NaN","NumberWrapper","Object","keys","j"],"mappings":"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","file":"js/chunk-3a329600.ddc5b3a5.js","sourcesContent":["var global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","<template>\n  <n-space vertical size=\"large\" style=\"height: 87vh; width: 100%\">\n    <n-layout position=\"absolute\" style=\"margin-top: 20px; width: 100%\">\n      <n-layout-content\n        style=\"padding-right: 23px; height: auto\"\n        id=\"bookLayout\"\n      >\n        <n-space\n          size=\"large\"\n          justify=\"center\"\n          v-if=\"bookList.length != 0\"\n          style=\"margin-bottom: 1px; overflow-y: auto\"\n          id=\"bookListViewer\"\n        >\n          <n-card\n            hoverable\n            content-style=\"padding: 5px\"\n            style=\"width: 200px; height: 347px\"\n            v-for=\"book in bookList\"\n            :key=\"book.book_id\"\n            @click=\"jumpToInfo(book.book_id)\"\n          >\n            <template #cover>\n              <img\n                :src=\"`/api/cover/${book.cover}`\"\n                style=\"height: 280px\"\n              />\n            </template>\n            <div>\n              <n-ellipsis class=\"title\" :line-clamp=\"1\">{{\n                book.title\n              }}</n-ellipsis>\n              <n-space>\n                <text\n                  class=\"author\"\n                  v-for=\"author in book.authors\"\n                  :key=\"author\"\n                  >{{ author }}</text\n                >\n              </n-space>\n            </div>\n          </n-card>\n        </n-space>\n        <model-progress\n          :percentage=\"uploadPercentage\"\n          :isUploading=\"isUploading\"\n        />\n      </n-layout-content>\n    </n-layout>\n  </n-space>\n</template>\n\n<style lang=\"scss\">\n.title {\n  font-size: 16px;\n  font-weight: bold;\n  color: #6d7070;\n  margin-bottom: 0px;\n  width: 100%;\n}\n.author {\n  top: 4px;\n  font-weight: bold;\n  color: #7a8181dc;\n  width: 100%;\n}\n</style>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport { useLoadingBar, useMessage } from \"naive-ui\";\nimport ModelProgress from \"@/components/ModelProgress.vue\";\nimport axios from \"axios\";\n\nexport default defineComponent({\n  mounted() {\n    document.addEventListener(\"dragenter\", this.onDrag, false);\n    document.addEventListener(\"dragover\", this.onDrag, false);\n    document.addEventListener(\"drop\", this.onDrop, false);\n  },\n  setup() {\n    const loadingBar = useLoadingBar();\n    const message = useMessage();\n    return {\n      createNoMoreMessage() {\n        message.info(\"没有更多了的说～\", { duration: 10000 });\n      },\n      handleStart() {\n        loadingBar.start();\n      },\n      handleFinish() {\n        loadingBar.finish();\n      },\n      handleError() {\n        loadingBar.error();\n      },\n    };\n  },\n  async created() {\n    this.getBookList(0);\n  },\n  data() {\n    return {\n      showCrawlCard: false,\n      bookList: [],\n      currentPage: 0,\n      scrollViewer: undefined,\n      is_loading: true,\n      uploadPercentage: 0,\n      isUploading: false,\n    };\n  },\n  components: {\n    ModelProgress,\n  },\n  props: {\n    query: {\n      type: String,\n      required: true,\n    },\n    fuzzy: {\n      type: Number,\n      required: true,\n    },\n    matcher: {\n      type: String,\n      required: false,\n    },\n  },\n  methods: {\n    uploadFile: function (file) {\n      // console.log(file);\n      this.isUploading = true;\n      this.uploadPercentage = 0;\n      if (file.name.split(\".\").pop().toLowerCase() == \"epub\") {\n        let form = new FormData();\n        form.append(\"file\", file);\n        form.append(\"token\", \"12321d\");\n        form.append(\"file_type\", \"epub\");\n        let config = {\n          onUploadProgress: (progressEvent) => {\n            var complete =\n              ((progressEvent.loaded / progressEvent.total) * 100) | 0;\n            this.uploadPercentage = complete;\n          },\n        };\n        axios\n          .post(`/api/add`, form, config)\n          .then((res) => {\n            if (res.data.msg === \"ok\") {\n              this.isUploading = false;\n              this.uploadPercentage = 0;\n              this.$router.go();\n            }\n          });\n      } else if (file.name.split(\".\").pop().toLowerCase() == \"zip\") {\n        let form = new FormData();\n        form.append(\"file\", file);\n        form.append(\"token\", \"12321d\");\n        form.append(\"file_type\", \"ehentai_zip\");\n        let config = {\n          onUploadProgress: (progressEvent) => {\n            var complete =\n              ((progressEvent.loaded / progressEvent.total) * 100) | 0;\n            this.uploadPercentage = complete;\n          },\n        };\n        axios\n          .post(`/api/add`, form, config)\n          .then((res) => {\n            if (res.data.msg === \"ok\") {\n              this.isUploading = false;\n              this.uploadPercentage = 0;\n              this.$router.go();\n            }\n          });\n      }\n    },\n    onDrag: function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    onDrop: function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      var dt = e.dataTransfer;\n      for (var i = 0; i !== dt.files.length; i++) {\n        this.uploadFile(dt.files[i]);\n      }\n    },\n    async getBookList(page) {\n      fetch(\"/api/list\", {\n        method: \"post\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          query: this.query ? this.query : \"time\",\n          matcher: this.matcher,\n          token: \"123456\",\n          fuzzy: this.fuzzy ? this.fuzzy : 0,\n          page: parseInt(page),\n        }),\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          this.bookList = this.bookList.concat(data);\n          this.currentPage++;\n          if (data.length == 0) {\n            // console.log('NO data')\n            this.createNoMoreMessage();\n            this.handleError();\n            this.is_loading = true;\n            return;\n          }\n          if (this.currentPage != 1) {\n            this.handleFinish();\n          }\n          setTimeout(() => (this.is_loading = false), 1000);\n        });\n    },\n    jumpToInfo(book_id) {\n      this.$router.push({\n        name: \"book.info\",\n        params: { id: parseInt(book_id) },\n      });\n    },\n    // handleScroll(value1, value2) {\n    // console.log(value1 + \" \" + value2);\n    // },\n  },\n  computed: {\n    scrollTop() {\n      if (this.scrollViewer === undefined) {\n        return 0;\n      }\n      return this.scrollViewer.scrollTop;\n    },\n  },\n  watch: {\n    bookList() {\n      this.$nextTick(() => {\n        this.scrollViewer = document.getElementById(\"bookLayout\").parentElement;\n        this.scrollViewer.onscroll = (event) => {\n          this.currentPage;\n          let scrollHeight = this.scrollViewer.scrollHeight;\n          let scrollTop = this.scrollViewer.scrollTop;\n          // console.log(scrollTop + '/' + scrollHeight)\n          if (scrollHeight < 100 || this.is_loading) {\n            return;\n          } else if (scrollHeight - scrollTop < 1000) {\n            // console.log('loading data...')\n            this.is_loading = true;\n            this.handleStart();\n            this.getBookList(this.currentPage);\n          }\n        };\n      });\n    },\n  },\n});\n</script>\n","import { render } from \"./BookList.vue?vue&type=template&id=2b1736e2\"\nimport script from \"./BookList.vue?vue&type=script&lang=js\"\nexport * from \"./BookList.vue?vue&type=script&lang=js\"\n\nimport \"./BookList.vue?vue&type=style&index=0&id=2b1736e2&lang=scss\"\n\nimport exportComponent from \"/Users/forever/Documents/Java Script/comicdb/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var uncurryThis = require('../internals/function-uncurry-this');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = uncurryThis(1.0.valueOf);\n","var global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\n\nvar Array = global.Array;\nvar max = Math.max;\n\nmodule.exports = function (O, start, end) {\n  var length = lengthOfArrayLike(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar hasOwn = require('../internals/has-own-property');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar thisNumberValue = require('../internals/this-number-value');\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\nvar TypeError = global.TypeError;\nvar arraySlice = uncurryThis(''.slice);\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = charCodeAt(it, 0);\n    if (first === 43 || first === 45) {\n      third = charCodeAt(it, 2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (charCodeAt(it, 1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = arraySlice(it, 2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = charCodeAt(digits, index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n    var dummy = this;\n    // check on 1..constructor(foo) case\n    return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); })\n      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BookList.vue?vue&type=style&index=0&id=2b1736e2&lang=scss\""],"sourceRoot":""}